{
  "version": 3,
  "file": "tab-page.js",
  "sourceRoot": "..\\..",
  "sources": [
    "www\\js\\tab-page.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class App.TabPage\r\n\tconstructor: (@app, @parentTag, @pageDef, @defaultActionFn) ->\r\n\t\t@tiles = []\r\n\t\t@titlesTopMargin = 60\r\n\t\t@titlesYPos = 10\r\n\t\t@pageBorders = [ 12, 5, 12, 15 ]\r\n\t\t@tileSepXPixels = 20\r\n\t\t@tileSepYPixels = 10\r\n\t\t@groupSepPixels = 10\r\n\t\t@pageId = \"sqPage\"\r\n\t\t@pageSelector = \"#\" + @pageId\r\n\t\t@pageTitleClass = \"sqPageTitle\"\r\n\t\t@pageTitleSelector = \".\" + @pageTitleClass\r\n\t\t@tilesClass = \"sqTiles\"\r\n\t\t@tileContainerClass = \"sqTileContainer\"\r\n\t\t@tilesSelector = '.' + @tileContainerClass\r\n\t\t@colTitleClass = \"sqColTitle\"\r\n\t\t@tilesColumns = 2 # Overridden in redolayout\r\n\t\t@nextTileIdx = 0\r\n\t\t@columnTypes = {}\r\n\t\treturn\r\n\r\n\thandlePageNav: (pageNav) ->\r\n\t\t[_,tileName,navAction] = pageNav.match /\\~(.*)\\?(.*)/\r\n\t\tfor tile in @tiles\r\n\t\t\tif tile.tileDef.tileName is tileName\r\n\t\t\t\ttile.handleAction(navAction)\r\n\t\t\t\tbreak\r\n\t\treturn\r\n\r\n\tupdateDom: ->\r\n\t\t@calcLayout()\r\n\t\t@removeAll()\r\n\t\t# Add to html in parent tag\r\n\t\t$(@parentTag).html \"\"\"\r\n\t\t\t<div id=\"#{@pageId}\" class=\"sqPage\">\r\n\t\t\t\t<div class=\"#{@pageTitleClass}\"/>\r\n\t\t\t\t<div class=\"#{@tilesClass}\" style=\"height:100%;width:100%\">\r\n\t\t\t\t\t<div class=#{@tileContainerClass} style=\"width:100%;display:block;zoom:1;\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\"\"\"\r\n\t\t# Titles\r\n\t\tif @columnsDef?\r\n\t\t\tfor col, colIdx in @columnsDef\r\n\t\t\t\ttitle = col.title\r\n\t\t\t\tif title? and title isnt \"\"\r\n\t\t\t\t\t$(@pageTitleSelector).append \"\"\"\r\n\t\t\t\t\t\t<div class=\"#{@colTitleClass} #{@colTitleClass}_#{colIdx}\">#{title}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\"\"\"\r\n\t\t\t\tcolXPos = @getColXPos(colIdx)\r\n\t\t\t\t@setTitlePositionCss(colIdx, colXPos, @titlesYPos, 100)\r\n\t\t# Tiles\r\n\t\tif @pageDef.tiles?\r\n\t\t\tfor tileDef in @pageDef.tiles\r\n\t\t\t\tnewTile = @makeTileFromTileDef(tileDef)\r\n\t\t\t\ttile = @addTileToPage(tileDef, newTile)\r\n\t\t\t\t[x,y,sizeX, sizeY] = @getCellPos(tile)\r\n\t\t\t\ttile.reposition(x,y,sizeX,sizeY)\r\n\t\treturn\r\n\t\t\t\r\n\tremoveAll: ->\r\n\t\t@nextTileIdx = 0\r\n\t\t@clearTiles()\r\n\t\t$(\"##{@pageId}\").remove()\r\n\t\treturn\r\n\r\n\tclearTiles: ->\r\n\t\tfor tile in @tiles\r\n\t\t\ttile.removeFromDoc()\r\n\t\t@tiles = []\r\n\t\treturn\r\n\r\n\taddTileToPage: (tileDef, tile) ->\r\n\t\ttile.addToDoc()\r\n\t\t@tiles.push tile\r\n\t\treturn tile\r\n\r\n\tmakeTileFromTileDef: (tileDef) ->\r\n\t\t# Ensure tileDef is clean\r\n\t\ttileDef = @tileDefCleanCheck(tileDef)\r\n\t\t#Make the tile\r\n\t\tif tileDef.tileType is \"calendar\"\r\n\t\t\tdayIdx = if tileDef.calDayIndex? then tileDef.calDayIndex else 0\r\n\t\t\ttile = new App.CalendarTile(@app, tileDef, dayIdx)\r\n\t\telse if tileDef.tileType is \"clock\"\r\n\t\t\ttile = new App.Clock(tileDef)\r\n\t\telse if tileDef.tileType is \"iframe\"\r\n\t\t\ttile = new App.IframeTile(tileDef)\r\n\t\telse if tileDef.tileType is \"checkbox\"\r\n\t\t\ttile = new App.CheckBoxTile(tileDef)\r\n\t\telse if tileDef.tileType is \"textentry\"\r\n\t\t\ttile = new App.TextEntryTile(tileDef)\r\n\t\telse\r\n\t\t\ttile = new App.SceneButton(tileDef)\r\n\t\ttile.setTileIndex(@nextTileIdx++)\r\n\t\treturn tile\r\n\r\n\ttileDefCleanCheck: (tileDef) ->\r\n\t\ttileDef.parentTag = @tilesSelector\r\n\t\tif \"tileColour\" not of tileDef\r\n\t\t\ttileDef.tileColour = @app.tileColours.getNextColour()\r\n\t\tif \"clickFn\" not of tileDef\r\n\t\t\ttileDef.clickFn = @defaultActionFn\r\n\t\tif \"colSpan\" not of tileDef\r\n\t\t\ttileDef.colSpan = 1\r\n\t\tif \"rowSpan\" not of tileDef\r\n\t\t\ttileDef.rowSpan = 1\r\n\t\tif \"url\" not of tileDef\r\n\t\t\ttileDef.url = \"\"\r\n\t\tif \"visibility\" not of tileDef\r\n\t\t\ttileDef.visibility = \"both\"\r\n\t\tif \"tileName\" not of tileDef\r\n\t\t\ttileDef.tileName = \"\"\r\n\t\tif \"tileText\" not of tileDef\r\n\t\t\ttileDef.tileText = \"\"\r\n\t\tif \"iconName\" not of tileDef\r\n\t\t\ttileDef.iconName = \"\"\r\n\t\tif \"positionCue\" not of tileDef\r\n\t\t\ttileDef.positionCue = \"\"\r\n\t\ttileDef.tierIdx = 0\r\n\t\ttileDef.groupIdx = 0\r\n\t\treturn tileDef\r\n\r\n\tgetPageHeight: ->\r\n\t\tpageSel = $(\"##{@pageId}\")\r\n\t\treturn pageSel[0].clientHeight\r\n\r\n\tgetPageTop: ->\r\n\t\treturn 0\r\n\r\n\tcalcLayout: ->\r\n\t\twinWidth = $(window).width()\r\n\t\twinHeight = $(window).height()\r\n\t\tisPortrait = (winWidth < winHeight)\r\n\t\tif isPortrait\r\n\t\t\t@baseColumnsDef = if @pageDef.columns? then @pageDef.columns.portrait else null\r\n\t\t\t@tilesDown = if @pageDef.rows? then @pageDef.rows.portrait else 15\r\n\t\t\t@tilesAcross = 2\r\n\t\t\t@columnsAcross = 2\r\n\t\telse\r\n\t\t\t@baseColumnsDef = if @pageDef.columns? then @pageDef.columns.landscape else null\r\n\t\t\t@tilesDown = if @pageDef.rows? then @pageDef.rows.landscape else 8\r\n\t\t\t@tilesAcross = 3\r\n\t\t\t@columnsAcross = 3\r\n\t\t@columnsDef = []\r\n\t\tif @baseColumnsDef?\r\n\t\t\t@columnsDef = (col for col in @baseColumnsDef)\r\n\t\t@noTitles = true\r\n\t\t# Check for auto-add columns\r\n\t\tautoAddColIdx = -1\r\n\t\tcolsToAdd = 0\r\n\t\tfor colDef, colIdx in @columnsDef\r\n\t\t\tif colDef.autoAdd? and colDef.autoAdd\r\n\t\t\t\tautoAddColIdx = colIdx\r\n\t\t\t\tnumTilesInAutoCol = 0\r\n\t\t\t\tfor tile in @pageDef.tiles\r\n\t\t\t\t\tif not (tile.colType? and colDef.colType and (tile.colType isnt colDef.colType))\r\n\t\t\t\t\t\tnumTilesInAutoCol++\r\n\t\t\t\tcolsToAdd = Math.floor(numTilesInAutoCol/@tilesDown + 0.5) - 2\r\n\t\t\t\tbreak\r\n\t\tif colsToAdd > 0\r\n\t\t\tcolToCopy = @columnsDef[autoAddColIdx]\r\n\t\t\tfor i in [0...colsToAdd]\r\n\t\t\t\t@columnsDef.splice(autoAddColIdx, 0, colToCopy)\r\n\t\t# Handle columns\r\n\t\tif @columnsDef?\r\n\t\t\t@tilesAcross = 0\r\n\t\t\tfor colDef, colIdx in @columnsDef\r\n\t\t\t\tif colDef.title? and colDef.title isnt \"\"\r\n\t\t\t\t\t@noTitles = false\r\n\t\t\t\tcolType = if colDef.colType? then colDef.colType else \"\"\r\n\t\t\t\tif colType not of @columnTypes\r\n\t\t\t\t\t@columnTypes[colType] = \r\n\t\t\t\t\t\tfrontTileCount: 0\r\n\t\t\t\t\t\tendTileCount: 0\r\n\t\t\t\t\t\tcolStartIdx: colIdx\r\n\t\t\t\t\t\tcolCount: 1\r\n\t\t\t\t\t\tcolSpan: if colDef.colSpan? then colDef.colSpan else 1\r\n\t\t\t\telse\r\n\t\t\t\t\t@columnTypes[colType].colCount++\r\n\t\t\t\t\t@columnTypes[colType].colSpan+=if colDef.colSpan? then colDef.colSpan else 1\r\n\t\t\t\t@tilesAcross += colDef.colSpan\r\n\t\t\t@columnsAcross = @columnsDef.length\r\n\t\telse\r\n\t\t\t@columnTypes =\r\n\t\t\t\t\"\": \r\n\t\t\t\t\tfrontTileCount: 0\r\n\t\t\t\t\tendTileCount: 0\r\n\t\t\t\t\tcolStartIdx: 0\r\n\t\t\t\t\tcolCount: 1\r\n\t\t# Layout page\r\n\t\t@cellWidth = (winWidth - @pageBorders[1] - @pageBorders[3]) / @tilesAcross\r\n\t\t@cellHeight = (winHeight - @pageBorders[0] - @pageBorders[2] - (if @noTitles then 0 else @titlesTopMargin)) / @tilesDown\r\n\t\t@tileWidth = @cellWidth - @tileSepXPixels\r\n\t\t@tileHeight = @cellHeight - @tileSepYPixels\r\n\t\t$(\"##{@pageId}\").css {\r\n\t\t\t\"height\": document.documentElement.clientHeight + \"px\"\r\n\t\t\t}\r\n\t\treturn isPortrait\r\n\r\n\tgetColXPos: (colIdx) ->\r\n\t\txStart = @pageBorders[3]\r\n\t\t# Default if no columns specified\r\n\t\tcellX = xStart + colIdx * @cellWidth * 2\r\n\t\t# Work out from column def\r\n\t\tcellXIdx = 0\r\n\t\tfor i in [0...colIdx]\r\n\t\t\tcellXIdx += if @columnsDef? and @columnsDef[i] then @columnsDef[i].colSpan else 1\r\n\t\treturn xStart + cellXIdx * @cellWidth\r\n\r\n\tgetTitlePos: () ->\r\n\t\treturn [0, 10, \"200%\"]\r\n\r\n\tgetGroupTitleWidth: () ->\r\n\t\treturn 400\r\n\r\n\tgetColInfo: (tile) ->\r\n\r\n\tgetCellPos: (tile) ->\r\n\t\tcolType = if tile.tileDef.colType? then tile.tileDef.colType else \"\"\r\n\t\tif colType of @columnTypes\r\n\t\t\tcolInfo = @columnTypes[colType]\r\n\t\telse\r\n\t\t\tcolInfo = @columnTypes[\"\"]\r\n\t\t# Check for colSpan not specified\r\n\t\tif \"colSpan\" not of tile.tileDef or tile.tileDef.colSpan is 0\r\n\t\t\tcolSpan = colInfo.colSpan\r\n\t\telse\r\n\t\t\tcolSpan = tile.tileDef.colSpan\r\n\t\t# Check for rowSpan not specified\r\n\t\tif \"rowSpan\" not of tile.tileDef or tile.tileDef.rowSpan is 0\r\n\t\t\trowSpan = @tilesDown\r\n\t\telse\r\n\t\t\trowSpan = tile.tileDef.rowSpan\r\n\t\t# Check for special positioning cues\r\n\t\tif tile.tileDef.positionCue is \"end\"\r\n\t\t\twinWidth = $(window).width()\r\n\t\t\twinHeight = $(window).height()\r\n\t\t\tisPortrait = (winWidth < winHeight)\r\n\t\t\tif isPortrait\r\n\t\t\t\tcolIdx = 1\r\n\t\t\t\tcolSpan = 1\r\n\t\t\t\trowIdx = @tilesDown - Math.floor(colInfo.endTileCount % @tilesDown) - rowSpan\r\n\t\t\t\tcolInfo.endTileCount+=rowSpan\r\n\t\t\telse\r\n\t\t\t\tcolIdx = colInfo.colStartIdx + colInfo.colCount - 1 - Math.floor(colInfo.endTileCount/@tilesDown)\r\n\t\t\t\trowIdx = @tilesDown - Math.floor(colInfo.endTileCount % @tilesDown) - rowSpan\r\n\t\t\t\tcolInfo.endTileCount+=rowSpan\r\n\t\telse\r\n\t\t\tcolIdx = colInfo.colStartIdx + Math.floor(colInfo.frontTileCount / @tilesDown)\r\n\t\t\trowIdx = Math.floor(colInfo.frontTileCount % @tilesDown)\r\n\t\t\tcolInfo.frontTileCount+=rowSpan\r\n\t\t# Column position\r\n\t\tcellX = @getColXPos(colIdx)\r\n\t\tcellY = @pageBorders[0] + (if @noTitles then 0 else @titlesTopMargin) + rowIdx * @cellHeight\r\n\t\t# Size of tile in pixels\t\t\r\n\t\tsizeX = @tileWidth * colSpan + (@tileSepXPixels * (colSpan-1))\r\n\t\tsizeY = @tileHeight * rowSpan + (@tileSepYPixels * (rowSpan-1))\r\n\t\treturn [cellX, cellY, sizeX, sizeY]\r\n\r\n\treDoLayout: ->\r\n\t\treturn @calcLayout()\r\n\r\n\tgetTilesAcrossScreen: ->\r\n\t\treturn @tilesAcross\r\n\r\n\tsetTitlePositionCss: (colIdx, posX, posY) ->\r\n\t\t$('.' + @colTitleClass + \"_\" + colIdx).css {\r\n\t\t\t\"margin-left\": posX + \"px\", \r\n\t\t\t\"margin-top\": posY + \"px\",\r\n\t\t\t\"display\": \"block\",\r\n\t\t\t\"position\": \"absolute\"\r\n\t\t\t}\r\n\t\t\t# \"font-size\": fontScaling + \"%\",\r\n\t\treturn\r\n"
  ]
}