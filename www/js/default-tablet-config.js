// Generated by CoffeeScript 1.8.0
var DefaultTabletConfig;

DefaultTabletConfig = (function() {
  function DefaultTabletConfig() {}

  DefaultTabletConfig.prototype.get = function(serverSettings, additionalSettings) {
    var autServ, calServerUrl, comKey, comVal, energyServerUrl, key, pagKey, pagVal, servIdx, servUrl, tabConfig, val, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1;
    tabConfig = {
      common: {
        servers: [],
        fixedActions: [],
        iconAliasing: {
          automationIcons: [
            {
              regex: "^Off$",
              iconName: "bulb-off"
            }, {
              regex: "^On$",
              iconName: "bulb-on"
            }, {
              regex: "^Bright$",
              iconName: "bulb-on"
            }, {
              regex: "^Mood",
              iconName: "bulb-mood"
            }, {
              regex: "^Stars",
              iconName: "stars"
            }
          ]
        },
        pages: {
          "Home": {
            defaultPage: true,
            pageName: "Home",
            pageTitle: "Home",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "clock",
                "tileName": "Clock",
                "groupName": "Clock",
                "positionCue": "end",
                "rowSpan": 2,
                "colSpan": 2
              }, {
                "tileType": "nav",
                "tileName": "Rooms",
                "colType": "nav",
                "iconName": "floorplan",
                "tileText": "",
                "url": "Rooms",
                "iconX": "centre"
              }, {
                "tileType": "nav",
                "tileName": "Settings",
                "colType": "nav",
                "iconName": "config",
                "tileText": "",
                "url": "Settings",
                "iconX": "centre"
              }
            ],
            tileGen: [
              {
                "tabConfigFavListName": "favourites",
                "tileType": "action",
                "tileSelect": "groupName",
                "tileMult": "all",
                "tileSort": "tileText",
                "tileNameFrom": "actionName",
                "tileTextFrom": "actionName",
                "urlFrom": "actionUrl",
                "rowSpan": 1,
                "colSpan": 2
              }
            ]
          },
          "Rooms": {
            pageName: "Rooms",
            pageTitle: "Rooms",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tileGen: [
              {
                "tileType": "action",
                "colType": "",
                "tileSelect": "groupName",
                "tileMult": "unique",
                "tileSort": "groupName",
                "tileNameFrom": "groupName",
                "tileTextFrom": "groupName",
                "pageGenRule": "RoomPages",
                "urlFrom": "groupName",
                "iconName": ""
              }
            ],
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre"
              }
            ]
          },
          "Calendar": {
            pageName: "Calendar",
            pageTitle: "Calendar",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 4
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre"
              }, {
                "tileType": "nav",
                "tileName": "Next",
                "colType": "nav",
                "iconName": "arrow-right",
                "tileText": "",
                "url": "~Calendar?next",
                "iconX": "centre"
              }, {
                "tileType": "nav",
                "tileName": "Prev",
                "colType": "nav",
                "iconName": "arrow-left",
                "tileText": "",
                "url": "~Calendar?prev",
                "iconX": "centre"
              }, {
                "tileType": "calendar",
                "tileName": "Calendar",
                "groupName": "Calendar",
                "rowSpan": 0,
                "colSpan": 0
              }
            ]
          },
          "Energy": {
            pageName: "Energy",
            pageTitle: "Energy",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 4
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre"
              }
            ]
          },
          "Settings": {
            pageName: "Settings",
            pageTitle: "Settings",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            rows: {
              landscape: 10,
              portrait: 14
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre",
                "forceReloadPages": true
              }, {
                "tileName": "Favourites",
                "groupName": "Settings",
                "tileText": "Set Favourites",
                "rowSpan": 1,
                "colSpan": 2,
                "url": "FavsSelect",
                "iconName": "star",
                "pageGenRule": "FavsSelectPage"
              }, {
                "tileName": "Dim",
                "groupName": "Settings",
                "tileText": "Dim Display Now",
                "rowSpan": 1,
                "colSpan": 2,
                "url": "DimDisplay",
                "iconName": "dim"
              }, {
                "tileType": "checkbox",
                "tileName": "AutoDim",
                "groupName": "Settings",
                "tileText": "AutoDim Display",
                "rowSpan": 1,
                "colSpan": 2,
                "url": "~AutoDim?toggle",
                "iconName": "checked",
                "iconNameOff": "unchecked",
                "varName": "AutoDim"
              }, {
                "tileType": "textentry",
                "tileName": "ConfigServer",
                "groupName": "Settings",
                "rowSpan": 1,
                "colSpan": 2,
                "label": "Cfg URL ",
                "contentType": "url",
                "varName": "ConfigServerUrl",
                "clickFn": ""
              }, {
                "tileType": "textentry",
                "tileName": "TabletName",
                "groupName": "Settings",
                "rowSpan": 1,
                "colSpan": 2,
                "label": "TabName ",
                "contentType": "devname",
                "varName": "DeviceConfigName",
                "clickFn": ""
              }
            ]
          },
          "DimDisplay": {
            pageName: "Dim",
            pageTitle: "Dim",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "tileText": "",
                "url": "Home",
                "rowSpan": 0,
                "tileColour": "black"
              }
            ]
          },
          "FavSelectRoom": {
            pageName: "FavSelectRooms",
            pageTitle: "Select Room",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tileGen: [
              {
                "tileType": "action",
                "colType": "",
                "tileSelect": "groupName",
                "tileMult": "unique",
                "tileSort": "groupName",
                "tileNameFrom": "groupName",
                "tileTextFrom": "groupName",
                "pageGenRule": "RoomPages",
                "urlFrom": "groupName",
                "iconName": "",
                "pageMode": "SelFavs"
              }
            ],
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home"
              }
            ]
          }
        },
        pageGen: {
          "RoomPages": {
            "pageNameFrom": "tileText",
            "pageTitleFrom": "tileText",
            "tileModeFrom": "pageMode",
            columns: {
              landscape: [
                {
                  "title": "",
                  "titleGen": "pageName",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "titleGen": "pageName",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre"
              }
            ],
            tileGen: [
              {
                "tileType": "action",
                "colType": "",
                "tileSelect": "groupName",
                "tileMult": "all",
                "tileFilterValFrom": "pageName",
                "tileSort": "tileName",
                "tileNameFrom": "actionName",
                "tileTextFrom": "actionName",
                "urlFrom": "actionUrl"
              }
            ]
          },
          "FavsSelectPage": {
            "pageName": "Set Favourites",
            "pageTitle": "Set Favourites",
            columns: {
              landscape: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ],
              portrait: [
                {
                  "title": "",
                  "colSpan": 2
                }, {
                  "title": "",
                  "colSpan": 1,
                  "colType": "nav"
                }
              ]
            },
            tilesFixed: [
              {
                "tileType": "nav",
                "tileName": "Home",
                "colType": "nav",
                "iconName": "home",
                "tileText": "",
                "url": "Home",
                "iconX": "centre"
              }, {
                "tileType": "action",
                "tileName": "Add Fav",
                "colType": "nav",
                "tileText": "Add",
                "url": "FavSelectRoom",
                "iconName": "add"
              }
            ],
            tileGen: [
              {
                "tabConfigFavListName": "favourites",
                "tileType": "action",
                "tileSelect": "groupName",
                "tileMult": "all",
                "tileSort": "tileText",
                "tileNameFrom": "actionName",
                "tileTextFrom": "actionName",
                "url": "DelFav",
                "rowSpan": 1,
                "colSpan": 2,
                "iconName": "delete"
              }
            ]
          }
        }
      }
    };
    _ref = serverSettings.showAutomationServerSettings;
    for (servIdx = _i = 0, _len = _ref.length; _i < _len; servIdx = ++_i) {
      autServ = _ref[servIdx];
      tabConfig.common.pages["Settings"].tilesFixed.push({
        "tileType": "textentry",
        "tileName": "AutServer" + servIdx,
        "groupName": "Settings",
        "rowSpan": 1,
        "colSpan": 2,
        "label": autServ + " ",
        "contentType": "url",
        "varName": autServ + "ServerUrl",
        "clickFn": ""
      });
    }
    _ref1 = serverSettings.showAutomationServerSettings;
    for (servIdx = _j = 0, _len1 = _ref1.length; _j < _len1; servIdx = ++_j) {
      autServ = _ref1[servIdx];
      servUrl = LocalStorage.get(autServ + "ServerUrl");
      if ((servUrl != null) && servUrl !== "") {
        tabConfig.common.servers.push({
          "type": autServ,
          "name": autServ,
          "url": servUrl,
          "iconAliasing": "automationIcons"
        });
      }
    }
    if (serverSettings.showCalServerSetting) {
      tabConfig.common.pages["Settings"].tilesFixed.push({
        "tileType": "textentry",
        "tileName": "CalServer",
        "groupName": "Settings",
        "rowSpan": 1,
        "colSpan": 2,
        "label": "CalServer ",
        "contentType": "url",
        "varName": "CalServerUrl",
        "clickFn": ""
      });
    }
    calServerUrl = LocalStorage.get("CalServerUrl");
    if ((calServerUrl != null) && calServerUrl !== "") {
      tabConfig.common.calendar = {
        "url": calServerUrl,
        "numDays": 90
      };
      tabConfig.common.pages["Home"].tilesFixed.push({
        "tileType": "nav",
        "tileName": "Calendar",
        "colType": "nav",
        "iconName": "calendar",
        "tileText": "",
        "url": "Calendar",
        "iconX": "centre"
      });
    }
    if (serverSettings.showEnergyServerSetting) {
      tabConfig.common.pages["Settings"].tilesFixed.push({
        "tileType": "textentry",
        "tileName": "EnergyServer",
        "groupName": "Settings",
        "rowSpan": 1,
        "colSpan": 2,
        "label": "EnergyUrl ",
        "contentType": "url",
        "varName": "EnergyServerUrl",
        "clickFn": ""
      });
    }
    energyServerUrl = LocalStorage.get("EnergyServerUrl");
    if ((energyServerUrl != null) && energyServerUrl !== "") {
      tabConfig.common.pages["Energy"].tilesFixed.push({
        "tileType": "iframe",
        "tileName": "EnergyWidget",
        "groupName": "Energy",
        "contentUrl": energyServerUrl,
        "rowSpan": 0,
        "colSpan": 0
      });
      tabConfig.common.pages["Home"].tilesFixed.push({
        "tileType": "nav",
        "tileName": "Energy",
        "colType": "nav",
        "iconName": "energy",
        "tileText": "",
        "url": "Energy",
        "iconX": "centre"
      });
    }
    if (additionalSettings != null) {
      for (key in additionalSettings) {
        val = additionalSettings[key];
        if (key === "common") {
          for (comVal = _k = 0, _len2 = val.length; _k < _len2; comVal = ++_k) {
            comKey = val[comVal];
            if (comKey === "pages" || comKey === "pageGen") {
              for (pagVal = _l = 0, _len3 = comVal.length; _l < _len3; pagVal = ++_l) {
                pagKey = comVal[pagVal];
                tabConfig.common[comKey][pagKey] = pagVal;
              }
            } else if (comKey === "servers") {
              tabConfig.common.servers.push(comVal);
            } else if (comKey === "fixedActions") {
              tabConfig.common.fixedActions.push(comVal);
            } else {
              tabConfig.common[comKey] = comVal;
            }
          }
        }
        tabConfig[key] = val;
      }
    }
    return tabConfig;
  };

  return DefaultTabletConfig;

})();
